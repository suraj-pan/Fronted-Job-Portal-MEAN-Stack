<app-navbar></app-navbar>

<!-- ðŸŒˆ Page Container -->
<section class="min-h-[calc(100vh-15vh)] bg-gradient-to-b from-blue-50 via-white to-blue-100 flex justify-center items-center px-4 py-6">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl p-8 md:p-10 border border-gray-100">

    <!-- ðŸ‘¤ Profile Header -->
    <div class="text-center mb-8">
      <div class="relative inline-block">
        <img src="assets/avatar.jpg" alt="Profile"
             class="w-24 h-24 mx-auto rounded-full shadow-md border-4 border-blue-100">
        <button
          class="absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full shadow hover:bg-blue-700 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
               stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-1.5A2.5 2.5 0 1118.5 9.5l-9 9H6v-3.5l9-9z"/>
          </svg>
        </button>
      </div>
      <h2 class="text-3xl font-bold text-blue-700 mt-4">My Profile</h2>
      <p class="text-gray-500 text-sm mt-1">Manage your personal and professional details</p>
    </div>

    <!-- ðŸ”„ Loading Spinner -->
    <div *ngIf="loading" class="flex justify-center items-center h-40">
      <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-blue-600"></div>
    </div>

    <!-- ðŸ§¾ Profile Form -->
    <form *ngIf="!loading" [formGroup]="profileForm" (ngSubmit)="updateProfile()" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Full Name -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Full Name</label>
        <input
          formControlName="name"
          type="text"
          placeholder="Enter your full name"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" />
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
        <input
          formControlName="email"
          type="email"
          class="w-full p-3 border border-gray-200 bg-gray-100 rounded-lg text-gray-500 cursor-not-allowed"
           />
      </div>

      <!-- Phone -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Phone</label>
        <input
          formControlName="phone"
          type="text"
          placeholder="Enter phone number"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" />
      </div>

      <!-- Experience -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Experience</label>
        <input
          formControlName="experience"
          type="text"
          placeholder="e.g., 3 years in frontend development"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" />
      </div>

      <!-- Skills -->
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Skills (comma separated)</label>
        <input
          formControlName="skills"
          type="text"
          placeholder="e.g., Angular, TypeScript, Node.js"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" />
      </div>

      <!-- Submit Button -->
      <div class="md:col-span-2">
        <button
          type="submit"
          class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 shadow-md disabled:opacity-70"
          [disabled]="saving">
          <span *ngIf="!saving">ðŸ’¾ Save Changes</span>
          <span *ngIf="saving" class="flex justify-center items-center gap-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
            </svg>
            Saving...
          </span>
        </button>
      </div>

      <!-- Success Message -->
      <div *ngIf="message" class="md:col-span-2 text-center text-green-600 font-medium mt-2">
        âœ… {{ message }}
      </div>
    </form>
  </div>
</section>
